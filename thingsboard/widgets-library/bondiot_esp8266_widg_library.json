{
  "widgetsBundle": {
    "alias": "mis_widgets",
    "title": "BondIoT-ESP8266-Widg_library",
    "image": null,
    "description": null
  },
  "widgetTypes": [
    {
      "alias": "light_bulb_1",
      "name": "Light Bulb 1",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "latest",
        "sizeX": 9,
        "sizeY": 9.5,
        "resources": [],
        "templateHtml": "<img id=\"myImage\" src=\"//sre-solutions.com/static/tb-widget/pic_bulboff.gif\" width=\"100\" height=\"180\">\r\n",
        "templateCss": "#myImage {\r\n\r\n    top: 50%;\r\n     transform: translate(-50%, -50%);\r\n    position: absolute;\r\n  left: 50%;\r\n}",
        "controllerScript": "\n\n\n\nself.onInit = function() {\n    var settings = self.ctx.settings;\n    var scope = self.ctx.$scope;\n    \n    \n    $('#myImage', self.ctx.$container).click(function(e){\n        if ( $('#myImage', self.ctx.$container)[0].src.includes(\"bulbon\"))\n        {\n        $('#myImage', self.ctx.$container)[0].src =  \"//sre-solutions.com/static/tb-widget/pic_bulboff.gif\"\n        requestChange(0,false);\n        }\n        else\n    {\n        $('#myImage', self.ctx.$container)[0].src =  \"//sre-solutions.com/static/tb-widget/pic_bulbon.gif\"\n        requestChange(0,true);\n    }\n    });\n    \n    function requestChange(g, value)\n    {\n\n        var method = settings.changeRequestMethod;\n    \n        var paramsBody = value;\n    \n        \n        var $injector = self.ctx.$injector;\n        let deviceService =self.ctx.deviceService;\n        \n        if (self.ctx.datasources.length > 0)\n        {\n        var dataKeyCounter = 0;\n        var entityId = self.ctx.datasources[0].entityId\n        \n            var requestBody = {\n                 method: method,\n                 params: paramsBody\n                 \n            }\n    \n       console.log(deviceService);\n        \n        \n        deviceService.sendOneWayRpcCommand(entityId, requestBody).subscribe((responseBody) => {});\n        }\n    }\n \n    \n\n\n}\n\nself.onDataUpdated = function() {\n \n \n console.log (self.ctx);\n    var settings = self.ctx.settings;\n    var value = 0;\n    \n    if (self.ctx.defaultSubscription.data.length > 0)\n    {\n        \n            if (self.ctx.defaultSubscription.data.length > 0)\n            {\n                if (self.ctx.defaultSubscription.data[0].data.length > 0)\n                    value = parseInt(self.ctx.defaultSubscription.data[0].data[0][1]);\n                    \n                if (value > 0)\n                {\n                    $('#myImage', self.ctx.$container)[0].src =  \"//sre-solutions.com/static/tb-widget/pic_bulbon.gif\"\n                }\n                else\n                {\n                    $('#myImage', self.ctx.$container)[0].src =  \"//sre-solutions.com/static/tb-widget/pic_bulboff.gif\"\n                }\n\n            }\n      \n        \n        \n    \n    }\n    \n    function isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n}\n\nself.onResize = function() {\n    if (self.ctx.width < parseInt(self.ctx.height) + 50 + \"px\")\n    {\n $('#myImage', self.ctx.$container)[0].style.width = self.ctx.width + \"px\";\n $('#myImage', self.ctx.$container)[0].style.height = \"auto\";\n    }\n else\n     {\n $('#myImage', self.ctx.$container)[0].style.width = \"auto\";\n $('#myImage', self.ctx.$container)[0].style.height = self.ctx.height + \"px\";\n    }\n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n           \n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 500\n            },\n            \"changeRequestMethod\": {\n                \"title\": \"Change request Method\",\n                \"type\": \"string\",\n                \"default\": \"setValue\"\n            }\n        },\n        \"required\": [\n                     \"requestTimeout\",\n                     \"changeRequestMethod\"\n\n                     ]\n    },\n    \"form\": [\n        \"requestTimeout\",\n        \"changeRequestMethod\"\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Light Bulb 1\"}"
      }
    },
    {
      "alias": "switch_1",
      "name": "Switch-Abierta-Cerrada",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "rpc",
        "sizeX": 9,
        "sizeY": 7.5,
        "resources": [
          {
            "url": "//sre-solutions.com/static/tb-widget/on-off-switch.css"
          },
          {
            "url": "//sre-solutions.com/static/tb-widget/on-off-switch.js"
          },
          {
            "url": "//sre-solutions.com/static/tb-widget/on-off-switch-onload.js"
          }
        ],
        "templateHtml": "<div class=\"checkbox-container\">\r\n\r\n\r\n    <input type=\"checkbox\" name=\"on-off-switch\" id=\"on-off-switch\" checked=\"\">\r\n</div>",
        "templateCss": ".on-off-switch\n{\n    \n    top: 50%;\n     transform:translate(-50%, -50%);\n     \n    position: absolute;\n  left: 50%;\n  \n}",
        "controllerScript": "var namespace;\nvar cssParser = new cssjs();\nvar dg\nself.onInit = function() {\n    console.log(self.ctx);\n    var settings = self.ctx.settings;\n        dg = new DG.OnOffSwitch({\n            el:  $('#on-off-switch', self.ctx.$container),\n            height: settings.height || 150,\n            trackColorOn:settings.backgroundcolorOn || \"#6AFD8A\",\n            trackColorOff:settings.backgroundcolorOff || \"#666\",\n            trackBorderColor:'#555',\n            textColorOff:settings.textColorOff || \"#fff\",\n            textColorOn:settings.textColorOn || \"#fff\",\n            textOn:settings.textOn || \"ABIERTA\",\n            textOff:settings.textOff || \"CERRADA\",\n            listener:function(name, checked){\n            \n            \n            var method = settings.changeRequestMethod || 'setValue';\n            var paramsBody = convertStatus(checked);\n            \n           \n            self.ctx.controlApi.sendOneWayCommand(method, \n                                        paramsBody, settings.requestTimeout)\n                        /*.subscribe(\n                            function success(responseBody) {\n                                \n                            }\n                        );*/\n            }\n            \n        });\n        \n    //Set Value Mathod\n    var convertStatusChangeMethod = settings.convertStatusChangeMethod || \"return value;\";\n    \n    var convertStatus = new Function(\"value\", convertStatusChangeMethod);\n\n    //Get Value Method\n    var convertGetValueMethod = settings.convertStatusRequestMethod || \"return data ? true : false;\";\n    \n    var convertGetValue = new Function(\"data\", convertGetValueMethod);\n    \n    function requestStatus() {\n        \n        method = settings.statusRequestMethod;\n        paramsBody = \"\";\n        self.ctx.controlApi.sendTwoWayCommand(method, \n                            paramsBody, \n                            settings.requestTimeout)\n            .subscribe(\n                function success(responseBody) {\n                        \n                       let value = (convertGetValue(responseBody)); \n                       \n                       if (value)\n                       {\n                       $('#on-off-switch', self.ctx.$container).checked = true;\n                       $('#on-off-switch', self.ctx.$container).value = true;\n                       dg.checked = true;\n                       \n                       }\n                        else\n                        {\n                        $('#on-off-switch', self.ctx.$container).checked = false;\n                        $('#on-off-switch', self.ctx.$container).click();\n                        }\n                    }\n                    );\n                }\n     \nconsole.log(self.ctx.defaultSubscription);\n\nif ((settings.retrieveValueMethod == \"Subscribe for attribute\") || (settings.retrieveValueMethod == \"Subscribe for timeseries\"))\n{\nvar type = 'timeseries'\nif (settings.retrieveValueMethod == \"Subscribe for attribute\")\n    type = 'attribute'\ndatasources = [\n        {  // datasource\n           type: 'entity',// type of the datasource. Can be \"function\" or \"entity\"\n           name: 'name', // name of the datasource (in case of \"entity\" usually Entity name)\n           aliasName: self.ctx.defaultSubscription.targetDeviceName, // name of the alias used to resolve this particular datasource Entity\n           entityName: self.ctx.defaultSubscription.targetDeviceName, // name of the Entity used as datasource\n           entityType: 'DEVICE', // datasource Entity type (for ex. \"DEVICE\", \"ASSET\", \"TENANT\", etc.)\n           entityId: self.ctx.defaultSubscription.targetDeviceId, // entity identificator presented as string uuid. \n           dataKeys: [ //  array of keys (Array<DataKey>) (attributes or timeseries) of the entity used to fetch data \n               { // dataKey\n                    name: settings.updateValueKey, // the name of the particular entity attribute/timeseries \n                    type: type, // type of the dataKey. Can be \"timeseries\", \"attribute\" or \"function\" \n                    label: settings.updateValueKey, // label of the dataKey. Used as display value (for ex. in the widget legend section) \n                    color: '#ffffff', // color of the key. Can be used by widget to set color of the key data (for ex. lines in line chart or segments in the pie chart).  \n                    funcBody: \"\", // only applicable for datasource with type \"function\" and \"function\" key type. Defines body of the function to generate simulated data.\n                    settings: {} // dataKey specific settings with structure according to the defined Data key settings json schema. See \"Settings schema section\".\n               },\n               //...\n           ]\n        },\n        //...\n    ]\n  function subscribeForLabelPatternsSources(datasources) {\n    const labelPatternsSourcesSubscriptionOptions = {\n      datasources,\n      useDashboardTimewindow: false,\n      type: 'latest',\n      callbacks: {\n        onDataUpdated: (subscription) => {\n          console.log(subscription.data[0].data[0][1]);\n          let data = subscription.data[0].data[0][1];\n          \n          let value = (convertGetValue(data)); \n          console.log(value);           \n                       if (value === true)\n                       {\n                           console.log (\"check\");\n                       dg.check()\n                       \n                       }\n                        else\n                        {\n                        dg.uncheck();\n                        console.log (\"uncheck\");\n                        \n                        }\n        }\n      }\n    };\n    \n    self.ctx.subscriptionApi.createSubscription(labelPatternsSourcesSubscriptionOptions, true).subscribe(\n      (subscription) => {\n        //this.labelPatternsSourcesSubscription = subscription;\n      }\n    );\n  }\nsubscribeForLabelPatternsSources(datasources);\n}\n\n    if (settings.retrieveValueMethod == 'Call RPC get value method')\n    {\n        requestStatus()\n    }\n    self.onResize();\n}\n    \n\n\n\nself.onResize = function() {\n\n    $('.on-off-switch', self.ctx.$container)[0].style.zoom = self.ctx.width/450;\n\n\n    if (parseInt($('.on-off-switch', self.ctx.$container)[0].style.height) > self.ctx.height)\n    $('.on-off-switch', self.ctx.$container)[0].style.zoom = self.ctx.height/180;\n    \n  //  $('#on-off-switch', self.ctx.$container)[0].style.marginLeft = self.ctx.width - $('.checkbox-container', self.ctx.$container)[0].offsetWidth + \"px\";\n  \n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"retrieveValueMethod\":\n            {\n                \"title\": \"Retrieve on/off value using method\",\n                            \"type\": \"string\",\n                            \"enum\": [\n                                \"Don't retrieve\",\n                                \"Call RPC get value method\",\n                                \"Subscribe for attribute\",\n                                \"Subscribe for timeseries\"],\n                            \"default\": \"Call RPC get value method\"\n            },\n            \"updateValueKey\": {\n                \"title\": \"Attribute/Timeseries value key (only when subscribe for attribute/timeseries method)\",\n                \"type\": \"string\",\n                \"default\": \"value\"\n            },\n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 60000\n            },\n            \"changeRequestMethod\": {\n                \"title\": \"RPC set value method\",\n                \"type\": \"string\",\n                \"default\": \"setValue\"\n            },\n            \"statusRequestMethod\": {\n                \"title\": \"RPC get value method\",\n                \"type\": \"string\",\n                \"default\": \"getValue\"\n            },\n            \"backgroundcolorOn\": {\n                \"title\": \"Background Color On\",\n                \"type\": \"string\",\n                \"default\": \"#6AFD8A\"\n            },\n            \"backgroundcolorOff\": {\n                \"title\": \"Background Color Off\",\n                \"type\": \"string\",\n                \"default\": \"#666\"\n            },\n            \"textColorOn\": {\n                \"title\": \"Text Color On\",\n                \"type\": \"string\",\n                \"default\": \"#fff\"\n            },\n            \"textColorOff\": {\n                \"title\": \"Text Color Off\",\n                \"type\": \"string\",\n                \"default\": \"#fff\"\n            },\n            \"height\": {\n                \"title\": \"Height in px\",\n                \"type\": \"number\",\n                \"default\": 150\n            },\n            \"textOn\": {\n                \"title\": \"Escotilla abierta\",\n                \"type\": \"string\",\n                \"default\": \"ABIERTA\"\n            },\n            \"textOff\": {\n                \"title\": \"Escotilla cerrada\",\n                \"type\": \"string\",\n                \"default\": \"CERRADA\"\n            },\n            \"convertStatusChangeMethod\": {\n                \"title\": \"Convert value function, f(value), returns payload used by RPC set value method\",\n                \"type\": \"string\",\n                \"default\": \"return value;\"\n            },\n            \"convertStatusRequestMethod\": {\n                \"title\": \"Parse value function, f(data), returns boolean\",\n                \"type\": \"string\",\n                \"default\": \"return data ? true : false;\"\n            } \n            \n        },\n        \"required\": [ \n                    \"retrieveValueMethod\",\n                     \"statusRequestMethod\",\n                     \"changeRequestMethod\",\n                     \"convertStatusRequestMethod\",\n                     \"convertStatusChangeMethod\",\n                     \"requestTimeout\",\n                     \"backgroundcolorOn\",\n                     \"backgroundcolorOff\",\n                     \"textColorOn\",\n                     \"textColorOff\",\n                     \"height\",\n                     \"textOn\",\n                     \"textOn\"]\n    },\n    \"form\": [\n        \"retrieveValueMethod\",\n        \"updateValueKey\",\n        \"statusRequestMethod\",\n        \"changeRequestMethod\",\n        {\n            \"key\": \"convertStatusRequestMethod\",\n            \"type\": \"javascript\"\n        },\n        {\n            \"key\": \"convertStatusChangeMethod\",\n            \"type\": \"javascript\"\n        },\n        \"requestTimeout\",\n        {\n            \"key\": \"backgroundcolorOn\",\n            \"type\": \"color\"\n        },{\n            \"key\": \"backgroundcolorOff\",\n            \"type\": \"color\"\n        },{\n            \"key\": \"textColorOn\",\n            \"type\": \"color\"\n        },{\n            \"key\": \"textColorOff\",\n            \"type\": \"color\"\n        },\n        \"height\",\n        \"textOn\",\n        \"textOff\"\n            ]\n        \n    \n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"targetDeviceAliases\":[],\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"parseGpioStatusFunction\":\"return body[pin] === true;\",\"gpioStatusChangeRequest\":{\"method\":\"setGpioStatus\",\"paramsBody\":\"{\\n   \\\"pin\\\": \\\"{$pin}\\\",\\n   \\\"enabled\\\": \\\"{$enabled}\\\"\\n}\"},\"requestTimeout\":500,\"switchPanelBackgroundColor\":\"#b71c1c\",\"gpioStatusRequest\":{\"method\":\"getGpioStatus\",\"paramsBody\":\"{}\"},\"gpioList\":[{\"pin\":1,\"label\":\"GPIO 1\",\"row\":0,\"col\":0,\"_uniqueKey\":0},{\"pin\":2,\"label\":\"GPIO 2\",\"row\":0,\"col\":1,\"_uniqueKey\":1},{\"pin\":3,\"label\":\"GPIO 3\",\"row\":1,\"col\":0,\"_uniqueKey\":2}]},\"title\":\"Switch-Abierta-Cerrada\"}"
      }
    },
    {
      "alias": "gauge_1",
      "name": "Gauge-CO2",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "latest",
        "sizeX": 9,
        "sizeY": 8,
        "resources": [
          {
            "url": "https://www.gstatic.com/charts/loader.js"
          }
        ],
        "templateHtml": "\r\n       <div id=\"chart_div\"></div>",
        "templateCss": "\n#container{\n\n}\n\n#chart_div {\n\n      display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n \n}",
        "controllerScript": "var data;\nvar options;\nvar chart;\nself.onInit = function() {\n    var settings = self.ctx.settings;\n      google.charts.load('current', {'packages':['gauge']});\n      google.charts.setOnLoadCallback(drawChart);\n\n      function drawChart() {\n\n        data = google.visualization.arrayToDataTable([\n          ['Label', 'Value'],\n          [settings.description || \"CO2\", 0]\n        ]);\n\n        options = {\n          width: self.ctx.width, height: self.ctx.height,\n          min: settings.minValue || 0, max: settings.maxValue,\n          greenFrom: settings.greenStart, greenTo: settings.greenEnd,\n          redFrom: settings.redStart, redTo: settings.redEnd,\n          yellowFrom:settings.yellowStart, yellowTo: settings.yellowEnd,\n          minorTicks: 5\n        };\n\n        chart = new google.visualization.Gauge($('#chart_div', self.ctx.$container)[0]);\n\n        chart.draw(data, options);\n        \n        self.onDataUpdated();\n\n        \n      }\n}\n\nself.onDataUpdated = function() {\n    var settings = self.ctx.settings;\n    var value = 0;\n    console.log (self.ctx);\n    \n    if (self.ctx.data.length > 0)\n    {\n        \n        if (self.ctx.data[0].data.length > 0)\n        value = self.ctx.data[0].data[0][1];\n        console.log (value);\n\n      \n        }\n    \n        \n        if (data !=undefined)\n        {\n            console.log (value);\n            data.setValue(0, 1, value);\n            chart.draw(data, options);\n        }\n}\n\nself.onResize = function() {\n    //if (options != undefined)\n    //{\n    //options.width = self.ctx.width;\n    //options.height = self.ctx.height;\n    //}\n    //$('#chart_div', self.ctx.$container)[0].style.marginLeft = -200 + self.ctx.width/2 + \"px\";\n    \n    \n    //if (chart != undefined)\n   //chart.draw(data, options);\n   self.onInit();\n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"description\": {\n                \"title\": \"Description\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"maxValue\": {\n                \"title\": \"Maximum Value\",\n                \"type\": \"number\",\n                \"default\": 100\n            },\n            \"minValue\": {\n                \"title\": \"Minimum Value\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"greenStart\": {\n                \"title\": \"Start green area\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"greenEnd\": {\n                \"title\": \"End green area\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"yellowStart\": {\n                \"title\": \"Start Yellow area\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"yellowEnd\": {\n                \"title\": \"End Yellow area\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"redStart\": {\n                \"title\": \"Start Red area\",\n                \"type\": \"number\",\n                \"default\": 0\n            },\n            \"redEnd\": {\n                \"title\": \"End Red area\",\n                \"type\": \"number\",\n                \"default\": 0\n            }\n            \n        },\n        \"required\": [\"maxValue\"]\n    },\n    \"form\": [\n        \"description\",\n        \"maxValue\",\n        \"minValue\",\n        \"greenStart\",\n        \"greenEnd\",\n        \"yellowStart\",\n        \"yellowEnd\",\n        \"redStart\",\n        \"redEnd\"\n            ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = Math.random() * 100;\\nreturn value;\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Gauge-CO2\"}"
      }
    },
    {
      "alias": "static",
      "name": "Change Dashboard State",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "static",
        "sizeX": 7.5,
        "sizeY": 2.5,
        "resources": [],
        "templateHtml": "<div id=\"changeDashboardState\">\n<span id=\"dashboardStateLabel\">Change Dashboard State</span>\n<select id=\"dashboardState\" name=\"dashboardState\">\n     \n    </select>\n    </div>",
        "templateCss": "#changeDashboardState {\n\nwidth: 100%;\n    top: 50%;\n    text-align: center;\n    position: absolute;\n}\n\n#dashboardState\n{\n    margin-left: 5px;\n}",
        "controllerScript": "self.onInit = function() {\n  \n    var settings = self.ctx.settings;\n    //set Font size of select\n    $('#dashboardState', self.ctx.$container)[0].style.fontSize = settings.fontSize + \"px\";\n    //set Font size of label\n    $('#dashboardStateLabel', self.ctx.$container)[0].style.fontSize = settings.fontSize + \"px\";\n    \n    //set Font color of Select\n    $('#dashboardState', self.ctx.$container)[0].style.color = settings.fontColor;\n    //set Font color of Label\n    $('#dashboardStateLabel', self.ctx.$container)[0].style.color = settings.fontColor;\n    \n    //set Label Text according to settings\n    $('#dashboardStateLabel', self.ctx.$container)[0].innerHTML = settings.labelText;\n    \n  \n    //Add Options to the Select\n    for (var i = 0; i < settings.dashboardStateList.length; i++)\n    {\n        $('#dashboardState', self.ctx.$container).append($('<option>', {\n                    text: settings.dashboardStateList[i].listEntry\n                }));\n    }\n    \n    \n    //Select changed\n    $('#dashboardState', self.ctx.$container).change(function() {\n    var listEntry = ('#dashboardState', self.ctx.$container).find(\":selected\").text()\n    console.log(\"list Entry:\" + listEntry)\n    \n    //Get Alias for the given name\n    var alias = settings.dashboardStateList[0].dashboardAlias;\n    for (var i = 0; i < settings.dashboardStateList.length; i++)\n    {\n        if (settings.dashboardStateList[i].listEntry == listEntry)\n        {\n            alias = settings.dashboardStateList[i].dashboardAlias;\n            break;\n        }\n    }\n    \n  var selection = alias;\n\n  var stateController = self.ctx.stateController;\n  var stateID = stateController.getStateId();\n  var params = stateController.getStateParams();\n\n  var entityId = (getEntityID(selection));\n \n  params.entityName = selection;\n  params.entityId.id = entityId;\n  \n    \nstateController.resetState();\n  stateController.updateState(stateID=stateID, params=params, true);\n  \n  \n});\n\n\nfunction getEntityID (alias)\n{\n    var aliases = self.ctx.dashboard.aliasController.entityAliases;\n   for (let element in aliases)\n   {\n       \n        if (aliases[element].alias == alias)\n            return aliases[element].filter.singleEntity.id;\n   }\n        \n}\n    \n\n}\n\nself.actionSources = function() {\n    return {\n        'elementClick': {\n            name: 'widget-action.element-click',\n            multiple: true\n        }\n    };\n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \n            \"fontSize\": {\n                \"title\": \"Font size\",\n                \"type\": \"number\",\n                \"default\": 16\n            },\n            \"fontColor\": {\n                \"title\": \"Font color\",\n                \"type\": \"string\",\n                \"default\": \"#008a00\"\n            },\n            \"labelText\": {\n                \"title\": \"Label Text\",\n                \"type\": \"string\",\n                \"default\": \"Change Dashboard State\"\n            },\n            \"dashboardStateList\": {\n                \"title\": \"Dashboard State list\",\n                \"type\": \"array\",\n                \"minItems\" : 1,\n                \"items\": {\n                    \"title\": \"Dashboard State\",\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"dashboardAlias\": {\n                            \"title\": \"Dashboard Alias\",\n                            \"type\": \"string\"\n                        },\n                        \"listEntry\": {\n                            \"title\": \"List Entry\",\n                            \"type\": \"string\"\n                        }\n                    },\n                    \"required\": [\"dashboardAlias\", \"listEntry\"]\n                }\n            }\n            },\n        \"required\": [\"dashboardStateList\"]\n    },\n    \"form\": [\n        \"fontSize\",\n        \"fontColor\",\n        \"labelText\",\n        \"dashboardStateList\"\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"static\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"dashboardStateList\":[{\"name\":\"test\",\"dashboardAlias\":\"CAG1D1\",\"listEntry\":\"Device 1\"}],\"fontSize\":16,\"fontColor\":\"#008a00\",\"labelText\":\"Change Dashboard State\"},\"title\":\"Change Dashboard State\",\"dropShadow\":true}"
      }
    },
    {
      "alias": "switch_abierta_cerrada_2",
      "name": "Switch-Abierta-Cerrada-2",
      "image": null,
      "description": null,
      "descriptor": {
        "type": "rpc",
        "sizeX": 9,
        "sizeY": 7.5,
        "resources": [
          {
            "url": "//sre-solutions.com/static/tb-widget/on-off-switch.css"
          },
          {
            "url": "//sre-solutions.com/static/tb-widget/on-off-switch.js"
          },
          {
            "url": "//sre-solutions.com/static/tb-widget/on-off-switch-onload.js"
          }
        ],
        "templateHtml": "<div class=\"checkbox-container\">\r\n\r\n\r\n    <input type=\"checkbox\" name=\"on-off-switch\" id=\"on-off-switch\" checked=\"\">\r\n</div>",
        "templateCss": ".on-off-switch\n{\n    \n    top: 50%;\n     transform:translate(-50%, -50%);\n     \n    position: absolute;\n  left: 50%;\n  \n}",
        "controllerScript": "self.onInit = function() {\n}\n\nself.onResize = function() {\n}\n\nself.onDestroy = function() {\n}",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"retrieveValueMethod\":\n            {\n                \"title\": \"Retrieve on/off value using method\",\n                            \"type\": \"string\",\n                            \"enum\": [\n                                \"Don't retrieve\",\n                                \"Call RPC get value method\",\n                                \"Subscribe for attribute\",\n                                \"Subscribe for timeseries\"],\n                            \"default\": \"Call RPC get value method\"\n            },\n            \"updateValueKey\": {\n                \"title\": \"Attribute/Timeseries value key (only when subscribe for attribute/timeseries method)\",\n                \"type\": \"string\",\n                \"default\": \"value\"\n            },\n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 60000\n            },\n            \"changeRequestMethod\": {\n                \"title\": \"RPC set value method\",\n                \"type\": \"string\",\n                \"default\": \"setValue\"\n            },\n            \"statusRequestMethod\": {\n                \"title\": \"RPC get value method\",\n                \"type\": \"string\",\n                \"default\": \"getValue\"\n            },\n            \"backgroundcolorOn\": {\n                \"title\": \"Background Color On\",\n                \"type\": \"string\",\n                \"default\": \"#6AFD8A\"\n            },\n            \"backgroundcolorOff\": {\n                \"title\": \"Background Color Off\",\n                \"type\": \"string\",\n                \"default\": \"#666\"\n            },\n            \"textColorOn\": {\n                \"title\": \"Text Color On\",\n                \"type\": \"string\",\n                \"default\": \"#fff\"\n            },\n            \"textColorOff\": {\n                \"title\": \"Text Color Off\",\n                \"type\": \"string\",\n                \"default\": \"#fff\"\n            },\n            \"height\": {\n                \"title\": \"Height in px\",\n                \"type\": \"number\",\n                \"default\": 150\n            },\n            \"textOn\": {\n                \"title\": \"Escotilla abierta\",\n                \"type\": \"string\",\n                \"default\": \"ABIERTA\"\n            },\n            \"textOff\": {\n                \"title\": \"Escotilla cerrada\",\n                \"type\": \"string\",\n                \"default\": \"CERRADA\"\n            },\n            \"convertStatusChangeMethod\": {\n                \"title\": \"Convert value function, f(value), returns payload used by RPC set value method\",\n                \"type\": \"string\",\n                \"default\": \"return value;\"\n            },\n            \"convertStatusRequestMethod\": {\n                \"title\": \"Parse value function, f(data), returns boolean\",\n                \"type\": \"string\",\n                \"default\": \"return data ? true : false;\"\n            } \n            \n        },\n        \"required\": [ \n                    \"retrieveValueMethod\",\n                     \"statusRequestMethod\",\n                     \"changeRequestMethod\",\n                     \"convertStatusRequestMethod\",\n                     \"convertStatusChangeMethod\",\n                     \"requestTimeout\",\n                     \"backgroundcolorOn\",\n                     \"backgroundcolorOff\",\n                     \"textColorOn\",\n                     \"textColorOff\",\n                     \"height\",\n                     \"textOn\",\n                     \"textOn\"]\n    },\n    \"form\": [\n        \"retrieveValueMethod\",\n        \"updateValueKey\",\n        \"statusRequestMethod\",\n        \"changeRequestMethod\",\n        {\n            \"key\": \"convertStatusRequestMethod\",\n            \"type\": \"javascript\"\n        },\n        {\n            \"key\": \"convertStatusChangeMethod\",\n            \"type\": \"javascript\"\n        },\n        \"requestTimeout\",\n        {\n            \"key\": \"backgroundcolorOn\",\n            \"type\": \"color\"\n        },{\n            \"key\": \"backgroundcolorOff\",\n            \"type\": \"color\"\n        },{\n            \"key\": \"textColorOn\",\n            \"type\": \"color\"\n        },{\n            \"key\": \"textColorOff\",\n            \"type\": \"color\"\n        },\n        \"height\",\n        \"textOn\",\n        \"textOff\"\n            ]\n        \n    \n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"targetDeviceAliases\":[],\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"parseGpioStatusFunction\":\"return body[pin] === true;\",\"gpioStatusChangeRequest\":{\"method\":\"setGpioStatus\",\"paramsBody\":\"{\\n   \\\"pin\\\": \\\"{$pin}\\\",\\n   \\\"enabled\\\": \\\"{$enabled}\\\"\\n}\"},\"requestTimeout\":500,\"switchPanelBackgroundColor\":\"#b71c1c\",\"gpioStatusRequest\":{\"method\":\"getGpioStatus\",\"paramsBody\":\"{}\"},\"gpioList\":[{\"pin\":1,\"label\":\"GPIO 1\",\"row\":0,\"col\":0,\"_uniqueKey\":0},{\"pin\":2,\"label\":\"GPIO 2\",\"row\":0,\"col\":1,\"_uniqueKey\":1},{\"pin\":3,\"label\":\"GPIO 3\",\"row\":1,\"col\":0,\"_uniqueKey\":2}]},\"title\":\"Switch-Abierta-Cerrada-2\"}"
      }
    },
    {
      "alias": "switch_custom",
      "name": "Switch-Custom",
      "image": "data:image/png;base64,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",
      "description": "Allows to send the RPC call to device when user toggle the switch. Advanced widget settings allow you to configure how to fetch the initial value of the switch.",
      "descriptor": {
        "type": "rpc",
        "sizeX": 4,
        "sizeY": 2.5,
        "resources": [],
        "templateHtml": "<tb-switch [ctx]='ctx'></tb-switch>",
        "templateCss": "",
        "controllerScript": "self.onInit = function() {\n}\n\nself.onResize = function() {\n}\n\nself.onDestroy = function() {\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"initialValue\": {\n                \"title\": \"Initial value\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"title\": {\n                \"title\": \"Switch title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"showOnOffLabels\": {\n                \"title\": \"Show on/off labels\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"retrieveValueMethod\": {\n                \"title\": \"Retrieve on/off value using method\",\n                \"type\": \"string\",\n                \"default\": \"rpc\"\n            },\n            \"valueKey\": {\n                \"title\": \"Attribute/Timeseries value key (only when subscribe for attribute/timeseries method)\",\n                \"type\": \"string\",\n                \"default\": \"value\"\n            },\n            \"getValueMethod\": {\n                \"title\": \"RPC get value method\",\n                \"type\": \"string\",\n                \"default\": \"getValue\"\n            },\n            \"setValueMethod\": {\n                \"title\": \"RPC set value method\",\n                \"type\": \"string\",\n                \"default\": \"setValue\"\n            },\n            \"parseValueFunction\": {\n                \"title\": \"Parse value function, f(data), returns boolean\",\n                \"type\": \"string\",\n                \"default\": \"return data ? true : false;\"\n            },\n            \"convertValueFunction\": {\n                \"title\": \"Convert value function, f(value), returns payload used by RPC set value method\",\n                \"type\": \"string\",\n                \"default\": \"return value;\"\n            },\n            \"requestTimeout\": {\n                \"title\": \"RPC request timeout\",\n                \"type\": \"number\",\n                \"default\": 60000\n            },\n            \"requestPersistent\": {\n                \"title\": \"RPC request persistent\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"persistentPollingInterval\": {\n                \"title\": \"Polling interval in milliseconds to get persistent RPC command response\",\n                \"type\": \"number\",\n                \"default\": 60000,\n                \"minimum\": 1000\n            }\n        },\n        \"required\": [\"requestTimeout\"]\n    },\n    \"form\": [\n        \"initialValue\",\n        \"title\",\n        \"showOnOffLabels\",\n        {\n            \"key\": \"retrieveValueMethod\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"none\",\n                    \"label\": \"Don't retrieve\"\n                },\n                {\n                    \"value\": \"rpc\",\n                    \"label\": \"Call RPC get value method\"\n                },\n                {\n                    \"value\": \"attribute\",\n                    \"label\": \"Subscribe for attribute\"\n                },\n                {\n                    \"value\": \"timeseries\",\n                    \"label\": \"Subscribe for timeseries\"\n                }\n            ]\n        },\n        \"valueKey\",\n        \"getValueMethod\",\n        \"setValueMethod\",\n        {\n            \"key\": \"parseValueFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/rpc/parse_value_fn\"\n        },\n        {\n            \"key\": \"convertValueFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/rpc/convert_value_fn\"\n        },\n        \"requestTimeout\",\n        \"requestPersistent\",\n        {\n            \"key\": \"persistentPollingInterval\",\n            \"condition\": \"model.requestPersistent === true\"\n        }\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"targetDeviceAliases\":[],\"showTitle\":false,\"backgroundColor\":\"#e6e7e8\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"requestTimeout\":500,\"initialValue\":false,\"getValueMethod\":\"getValue\",\"setValueMethod\":\"setValue\",\"showOnOffLabels\":true,\"title\":\"Switch control\"},\"title\":\"Switch-Custom\",\"dropShadow\":true,\"enableFullscreen\":false,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"useDashboardTimewindow\":true,\"showLegend\":false,\"actions\":{},\"decimals\":2}"
      }
    }
  ]
}